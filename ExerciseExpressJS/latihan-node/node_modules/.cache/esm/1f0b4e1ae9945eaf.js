let express,configure,createConnection,UserService,appRoute,appMiddleware;_e99‍.w("express",[["default",["express"],function(v){express=v}]]);_e99‍.w("./config/config",[["default",["configure"],function(v){configure=v}]]);_e99‍.w("./db/connection",[["default",["createConnection"],function(v){createConnection=v}]]);_e99‍.w("./services/user.service",[["default",["UserService"],function(v){UserService=v}]]);_e99‍.w("./routes",[["default",["appRoute"],function(v){appRoute=v}]]);_e99‍.w("./middleware/app-middleware",[["default",["appMiddleware"],function(v){appMiddleware=v}]]);






configure();
createConnection()
    .then(async (connection) => {
        if(connection.isConnected){
            console.log('DB CONNECTED');

            const app = express();
            app.use(appMiddleware);
            app.use(appRoute);

            app.listen(process.env.APP_PORT, ()=>{
                console.log(`APPLICATION ${process.env.APP_NAME}`)
            });

            // const userService = new UserService();
            // const user = await userService.create({
            //     fullname: 'condro birowo',
            //     email: 'condro@gmail.com',
            //     birthdate: '1990-11-12',
            // });
            // console.log(user);

            // const User = await userService.findAll()
        }else{
            throw new Error(`DB FAILED TO CONNECT`);
        }
    })
    
    .catch((err) => {
        console.log('error starting');
        _e99‍.g.console.error(err);
    })
