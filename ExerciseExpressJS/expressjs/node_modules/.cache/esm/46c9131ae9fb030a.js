let express,configure,createConnection,appRoute,appMiddleWare;_e9f‍.w("express",[["default",["express"],function(v){express=v}]]);_e9f‍.w("./config/config",[["default",["configure"],function(v){configure=v}]]);_e9f‍.w("./database/connection",[["default",["createConnection"],function(v){createConnection=v}]]);_e9f‍.w("./routes",[["default",["appRoute"],function(v){appRoute=v}]]);_e9f‍.w("./middleware/app-middleware",[["default",["appMiddleWare"],function(v){appMiddleWare=v}]]);





configure();
createConnection()
    .then(async(connection) => {
        if (connection.isConnected) {
            console.log('DB CONNECTED');

            const app = express();
            const mdw = appMiddleWare({opt1: 'fizz', opt2: 'bar'});

            app.use(mdw);
            app.use(appRoute);

            app.listen(process.env.APP_PORT, () => {
                console.log(`APPLICATION ${process.env.APP_NAME}`)
            });
        }else {
            throw new Error(`DATABASE FAILED TO CONNECT`);
        }
    }).catch((err) => {
        console.log(`error starting`);
        _e9f‍.g.console.log(err);
    });