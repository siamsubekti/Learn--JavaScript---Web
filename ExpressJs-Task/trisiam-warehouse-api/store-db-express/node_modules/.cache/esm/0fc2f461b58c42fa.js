let Router,ManagerService,bodyParser;_b58‍.x([["default",()=>_b58‍.o]]);_b58‍.w("express",[["Router",["Router"],function(v){Router=v}]]);_b58‍.w("../services/storage-manager.service",[["default",["ManagerService"],function(v){ManagerService=v}]]);_b58‍.w("body-parser",[["default",["bodyParser"],function(v){bodyParser=v}]]);



const managerService = new ManagerService();

_b58‍.d(Router()
    .get('/', async (req, res) => {
        try {
            const manager = await managerService.findAll();

            res.json({manager});
        } catch (error) {
            res.status(500).json({message : error.message});
        }
    })
    .get('/:id', async (req, res) => {
        try {
            const {id} = req.params;

            const manager = await manifestService.findOne(id);

            if (manager) {
                res.json({manager});
            }else res.status(404).json({message: `ID ${id} not found`});
        } catch (error) {
            res.status(500).json({message : error.message});
        }
    })
    .use(bodyParser.json())
    .post('/', async(req, res) => {
        try {
            let manager = {...req.body};
            _b58‍.g.console.log({...req.body});
            manager = await managerService.create(manager);

            res.status(201).json({manager});
        } catch (error) {
            res.status(500).json({message : error.message});
        }
    })
    .use(bodyParser.json())
    .put('/', async(req, res) =>{
        try{
            let manager = {...req.body};
            const data = await managerService.findOne(manager.id);
            if(data){
                manager = await managerService.update(manager);
                res.json({manager});
            }else res.status(404).json({message:`ID not foundd`});
        } catch(error) {
            res.status(500).json({message : error.message});
        }
    })
    .delete('/:id', async(req, res) => {
        try{
            const {id} = req.params;
            await managerService.delete(id);
            res.sendStatus(204);
        } catch(error) {
            res.status(500).json({message : error.message});
        }
    }));
